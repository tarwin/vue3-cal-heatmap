{"version":3,"file":"vue3-cal-heatmap.es.js","sources":["../src/components/Heatmap.ts","../src/components/CalendarHeatmap.vue","../src/index.ts"],"sourcesContent":["export interface Value {\n  date: Date | string;\n  count: number;\n}\n\nexport interface Activity {\n  count: number;\n  colorIndex: number;\n}\n\nexport type Activities = Map<string, Activity>;\n\nexport interface CalendarItem {\n  date: Date;\n  count?: number;\n  colorIndex: number;\n}\n\nexport type Calendar = CalendarItem[][];\n\nexport interface Month {\n  value: number;\n  index: number;\n}\n\nexport interface Locale {\n  months: string[];\n  days: string[];\n  on: string;\n  less: string;\n  more: string;\n}\n\nexport type TooltipFormatter = (item: CalendarItem, unit: string) => string;\n\nexport type ColorScaleType = 'linear' | 'percentile' | 'logarithmic';\n\nexport class Heatmap {\n  static readonly DEFAULT_RANGE_COLOR_LIGHT = [\n    \"#ebedf0\",\n    \"#dae2ef\",\n    \"#c0ddf9\",\n    \"#73b3f3\",\n    \"#3886e1\",\n    \"#17459e\",\n  ];\n  static readonly DEFAULT_RANGE_COLOR_DARK = [\n    \"#1f1f22\",\n    \"#1e334a\",\n    \"#1d466c\",\n    \"#1d5689\",\n    \"#1d69ac\",\n    \"#1B95D1\",\n  ];\n  // other color candidates\n  // static readonly DEFAULT_RANGE_COLOR_LIGHT = [ '#ebedf0', '#9be9a8', '#40c463', '#30a14e', '#216e39' ];\n  // static readonly DEFAULT_RANGE_COLOR_DARK  = [ '#161b22', '#0e4429', '#006d32', '#26a641', '#39d353' ];\n  // static readonly DEFAULT_RANGE_COLOR_DARK    = [ '#011526', '#012E40', '#025959', '#02735E', '#038C65' ];\n  // static readonly DEFAULT_RANGE_COLOR_DARK    = [ '#161b22', '#015958', '#008F8C', '#0CABA8', '#0FC2C0' ];\n  // static readonly DEFAULT_RANGE_COLOR_DARK    = [ '#012030', '#13678A', '#45C4B0', '#9AEBA3', '#DAFDBA' ];\n  static readonly DEFAULT_LOCALE: Locale = {\n    months: [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\",\n    ],\n    days: [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\n    on: \"on\",\n    less: \"Less\",\n    more: \"More\",\n  };\n  static readonly DEFAULT_TOOLTIP_UNIT = \"contributions\";\n  static readonly DAYS_IN_ONE_YEAR = 365;\n  static readonly DAYS_IN_WEEK = 7;\n  static readonly SQUARE_SIZE = 10;\n\n  startDate: Date;\n  endDate: Date;\n  startWeekday: number;\n  max: number;\n  colorRange: string[];\n\n  private _values: Value[];\n  private _firstFullWeekOfMonths?: Month[];\n  private _activities?: Activities;\n  private _calendar?: Calendar;\n\n  colorScale: ColorScaleType;\n  private _percentileThresholds?: number[];\n\n  constructor(\n    endDate: Date | string,\n    values: Value[],\n    max?: number,\n    colorRange: string[] = Heatmap.DEFAULT_RANGE_COLOR_LIGHT,\n    startWeekday: number = 0,\n    colorScale: ColorScaleType = 'linear'\n  ) {\n    this.endDate = this.parseDate(endDate);\n    this.max =\n      max || Math.ceil((Math.max(...values.map((day) => day.count)) / 5) * 4);\n    this.startWeekday  = startWeekday;\n    this.colorRange = colorRange;\n    this.colorScale = colorScale;\n    this.startDate = this.shiftDate(endDate, -Heatmap.DAYS_IN_ONE_YEAR);\n    this._values = values;\n  }\n\n  set values(v: Value[]) {\n    this.max = Math.ceil((Math.max(...v.map((day) => day.count)) / 5) * 4);\n    this._values = v;\n    this._firstFullWeekOfMonths = undefined;\n    this._calendar = undefined;\n    this._activities = undefined;\n    this._percentileThresholds = undefined;\n  }\n\n  get values(): Value[] {\n    return this._values;\n  }\n\n  get activities(): Activities {\n    if (!this._activities) {\n      this._activities = new Map();\n      for (let i = 0, len = this.values.length; i < len; i++) {\n        this._activities.set(this.keyDayParser(this.values[i].date), {\n          count: this.values[i].count,\n          colorIndex: this.getColorIndex(this.values[i].count),\n        });\n      }\n    }\n    return this._activities;\n  }\n\n  get weekCount() {\n    return this.getDaysCount() / Heatmap.DAYS_IN_WEEK;\n  }\n\n  get calendar() {\n    if (!this._calendar) {\n      let date = this.shiftDate(\n        this.startDate,\n        -this.getCountEmptyDaysAtStart()\n      );\n      date = new Date(date.getFullYear(), date.getMonth(), date.getDate());\n      this._calendar = new Array(this.weekCount);\n      for (let i = 0, len = this._calendar.length; i < len; i++) {\n        this._calendar[i] = new Array(Heatmap.DAYS_IN_WEEK);\n        for (let j = 0; j < Heatmap.DAYS_IN_WEEK; j++) {\n          const dayValues = this.activities.get(this.keyDayParser(date));\n          this._calendar![i][j] = {\n            date: new Date(date.valueOf()),\n            count: dayValues ? dayValues.count : undefined,\n            colorIndex: dayValues ? dayValues.colorIndex : 0,\n          };\n          date.setDate(date.getDate() + 1);\n        }\n      }\n    }\n    return this._calendar;\n  }\n\n  get firstFullWeekOfMonths(): Month[] {\n    if (!this._firstFullWeekOfMonths) {\n      const cal = this.calendar;\n      this._firstFullWeekOfMonths = [];\n      for (let index = 1, len = cal.length; index < len; index++) {\n        const lastWeek = cal[index - 1][0].date,\n          currentWeek = cal[index][0].date;\n        if (\n          lastWeek.getFullYear() < currentWeek.getFullYear() ||\n          lastWeek.getMonth() < currentWeek.getMonth()\n        ) {\n          this._firstFullWeekOfMonths.push({\n            value: currentWeek.getMonth(),\n            index,\n          });\n        }\n      }\n    }\n    return this._firstFullWeekOfMonths;\n  }\n\n  getCountEmptyDaysAtStart() {\n    return this.startDate.getDay();\n  }\n\n  getDayOfWeek(day: Date) {\n    return (day.getDay() - this.startWeekday + Heatmap.DAYS_IN_WEEK) % Heatmap.DAYS_IN_WEEK;\n  }\n\n  getCountEmptyDaysAtEnd() {\n    return Heatmap.DAYS_IN_WEEK - 1 - this.endDate.getDay();\n  }\n\n  getDaysCount() {\n    return (\n      Heatmap.DAYS_IN_ONE_YEAR +\n      1 +\n      this.getCountEmptyDaysAtStart() +\n      this.getCountEmptyDaysAtEnd()\n    );\n  }\n\n  private shiftDate(date: Date | string, numDays: number) {\n    const newDate = new Date(date);\n    newDate.setDate(newDate.getDate() + numDays);\n    return newDate;\n  }\n\n  private parseDate(entry: Date | string) {\n    return entry instanceof Date ? entry : new Date(entry);\n  }\n\n  private keyDayParser(date: Date | string) {\n    const day = this.parseDate(date);\n    return (\n      String(day.getFullYear()) +\n      String(day.getMonth()).padStart(2, \"0\") +\n      String(day.getDate()).padStart(2, \"0\")\n    );\n  }\n\n  private get percentileThresholds(): number[] {\n    if (!this._percentileThresholds) {\n      const counts = this._values\n        .map(v => v.count)\n        .filter(c => c > 0)\n        .sort((a, b) => a - b);\n      \n      if (counts.length === 0) {\n        this._percentileThresholds = [];\n        return this._percentileThresholds;\n      }\n\n      const numBuckets = this.colorRange.length - 1; // exclude \"no data\" color\n      this._percentileThresholds = [];\n      \n      for (let i = 1; i < numBuckets; i++) {\n        const percentile = i / numBuckets;\n        const index = Math.floor(percentile * counts.length);\n        this._percentileThresholds.push(counts[Math.min(index, counts.length - 1)]);\n      }\n    }\n    return this._percentileThresholds;\n  }\n\n  // getColorIndex(count?: number) {\n  //   if (count === null || count === undefined) {\n  //     return 0;\n  //   } else if (count <= 0) {\n  //     return 1;\n\t// \t} else if (count >= this.max) { // TODO max range exclusive flag\n\t// \t\treturn this.colorRange.length - 1;\n  //   } else {\n  //     // Old way of calculating colorIndex\n  //     // return Math.ceil(((count * 100) / this.max) * 0.03) + 1;\n\n  //     const percentage = ((count * 100) / this.max)  / 100;\n  //     const colorIndex = Math.floor(percentage * (this.colorRange.length - 2)) + 1;\n  //     return colorIndex;\n  //   }\n  // }\n\n  getColorIndex(count?: number) {\n    if (count === null || count === undefined) {\n      return 0;\n    } else if (count <= 0) {\n      return 1;\n    } else if (count >= this.max) {\n      return this.colorRange.length - 1;\n    }\n\n    switch (this.colorScale) {\n      case 'percentile':\n        return this.getPercentileColorIndex(count);\n      case 'logarithmic':\n        return this.getLogarithmicColorIndex(count);\n      default:\n        return this.getLinearColorIndex(count);\n    }\n  }\n\n  private getLinearColorIndex(count: number): number {\n    const percentage = count / this.max;\n    return Math.floor(percentage * (this.colorRange.length - 2)) + 1;\n  }\n\n  private getPercentileColorIndex(count: number): number {\n    const thresholds = this.percentileThresholds;\n    if (thresholds.length === 0) return 1;\n    \n    for (let i = 0; i < thresholds.length; i++) {\n      if (count <= thresholds[i]) {\n        return i + 1;\n      }\n    }\n    return this.colorRange.length - 1;\n  }\n\n  private getLogarithmicColorIndex(count: number): number {\n    const logCount = Math.log(count + 1);\n    const logMax = Math.log(this.max + 1);\n    const percentage = logCount / logMax;\n    return Math.floor(percentage * (this.colorRange.length - 2)) + 1;\n  }\n}\n","<script lang=\"ts\">\nimport {\n  defineComponent,\n  nextTick,\n  onBeforeUnmount,\n  onMounted,\n  PropType,\n  ref,\n  toRef,\n  toRefs,\n  watch,\n} from \"vue\";\nimport {\n  CalendarItem,\n  Heatmap,\n  Locale,\n  Month,\n  TooltipFormatter,\n  Value,\n  ColorScaleType,\n} from \"@/components/Heatmap\";\nimport tippy, {\n  createSingleton,\n  CreateSingletonInstance,\n  Instance,\n} from \"tippy.js\";\nimport \"tippy.js/dist/tippy.css\";\nimport \"tippy.js/dist/svg-arrow.css\";\n\nexport default /*#__PURE__*/ defineComponent({\n  name: \"CalendarHeatmap\",\n  props: {\n    endDate: {\n      required: true,\n    },\n    startWeekday: {\n      type: Number,\n      default: 0, // 0 for Sunday, 1 for Monday, etc.\n    },\n    max: {\n      type: Number,\n    },\n    rangeColor: {\n      type: Array as PropType<string[]>,\n    },\n    values: {\n      type: Array as PropType<Value[]>,\n      required: true,\n    },\n    locale: {\n      type: Object as PropType<Partial<Locale>>,\n    },\n    tooltip: {\n      type: Boolean,\n      default: true,\n    },\n    tooltipUnit: {\n      type: String,\n      default: Heatmap.DEFAULT_TOOLTIP_UNIT,\n    },\n    tooltipFormatter: {\n      type: Function as PropType<TooltipFormatter>,\n    },\n    noDataText: {\n      type: [Boolean, String],\n      default: null,\n    },\n    round: {\n      type: Number,\n      default: 0,\n    },\n    darkMode: Boolean,\n    showLegend: {\n      type: Boolean,\n      default: true,\n    },\n    showWeekdays: {\n      type: Boolean,\n      default: true,\n    },\n    asDots: {\n      type: Boolean,\n      default: false,\n    },\n    dayClasses: {\n      type: [String, Array] as PropType<string | string[]>,\n      default: \"\",\n    },\n    colorScale: {\n      type: String as PropType<ColorScaleType>,\n      default: 'linear',\n    },\n  },\n  emits: [\"dayClick\"],\n  setup(props) {\n    const SQUARE_BORDER_SIZE = Heatmap.SQUARE_SIZE / 5,\n      SQUARE_SIZE = Heatmap.SQUARE_SIZE + SQUARE_BORDER_SIZE,\n      LEFT_SECTION_WIDTH = props.showWeekdays\n        ? Math.ceil(Heatmap.SQUARE_SIZE * 2.5)\n        : 0,\n      RIGHT_SECTION_WIDTH = SQUARE_SIZE * 3,\n      TOP_SECTION_HEIGHT = Heatmap.SQUARE_SIZE + Heatmap.SQUARE_SIZE / 2,\n      BOTTOM_SECTION_HEIGHT = Heatmap.SQUARE_SIZE + Heatmap.SQUARE_SIZE / 2,\n      yearWrapperTransform = `translate(${LEFT_SECTION_WIDTH}, ${TOP_SECTION_HEIGHT})`,\n      svg = ref<null | SVGElement>(null),\n      now = ref(new Date()),\n      heatmap = ref(\n        new Heatmap(\n          props.endDate as Date,\n          props.values,\n          props.max,\n          props.rangeColor,\n          props.startWeekday,\n          props.colorScale\n        )\n      ),\n      width = ref(0),\n      height = ref(0),\n      viewbox = ref(\"0 0 0 0\"),\n      legendViewbox = ref(\"0 0 0 0\"),\n      daysLabelWrapperTransform = ref(\"\"),\n      monthsLabelWrapperTransform = ref(\"\"),\n      legendWrapperTransform = ref(\"\"),\n      lo = ref<Locale>({} as any),\n      rangeColor = ref<string[]>(\n        props.rangeColor ||\n          (props.darkMode\n            ? Heatmap.DEFAULT_RANGE_COLOR_DARK\n            : Heatmap.DEFAULT_RANGE_COLOR_LIGHT)\n      );\n    const DAYS_IN_WEEK = Heatmap.DAYS_IN_WEEK;\n\n    const rounding = ref(props.round);\n\n    if (props.asDots) {\n      rounding.value = 20;\n    }\n\n    const { values, tooltipUnit, tooltipFormatter, noDataText, max, locale } =\n        toRefs(props),\n      tippyInstances = new Map<HTMLElement, Instance>();\n\n    let tippySingleton: CreateSingletonInstance;\n\n    function initTippy() {\n      tippyInstances.clear();\n      if (tippySingleton) {\n        tippySingleton.setInstances(Array.from(tippyInstances.values()));\n      } else {\n        tippySingleton = createSingleton(Array.from(tippyInstances.values()), {\n          overrides: [],\n          moveTransition: \"transform 0.1s ease-out\",\n          allowHTML: true,\n        });\n      }\n    }\n\n    function tooltipOptions(day: CalendarItem) {\n      if (props.tooltip) {\n        if (day.count !== undefined) {\n          if (props.tooltipFormatter) {\n            return props.tooltipFormatter(day, props.tooltipUnit!);\n          }\n          return `<b>${day.count} ${props.tooltipUnit}</b> ${lo.value.on} ${\n            lo.value.months[day.date.getMonth()]\n          } ${day.date.getDate()}, ${day.date.getFullYear()}`;\n        } else if (props.noDataText) {\n          return `${props.noDataText}`;\n        } else if (props.noDataText !== false) {\n          return `<b>No ${props.tooltipUnit}</b> ${lo.value.on} ${\n            lo.value.months[day.date.getMonth()]\n          } ${day.date.getDate()}, ${day.date.getFullYear()}`;\n        }\n      }\n      return undefined;\n    }\n\n    function getWeekPosition(index: number) {\n      return `translate(${index * SQUARE_SIZE}, 0)`;\n    }\n\n    function getDayPosition(index: number) {\n      return `translate(0, ${index * SQUARE_SIZE})`;\n    }\n\n    function getMonthLabelPosition(month: Month) {\n      return {\n        x: SQUARE_SIZE * (month.index - 1),\n        y: SQUARE_SIZE - SQUARE_BORDER_SIZE,\n      };\n    }\n\n    watch(\n      [toRef(props, \"rangeColor\"), toRef(props, \"darkMode\")],\n      ([rc, dm]) => {\n        rangeColor.value =\n          rc ||\n          (dm\n            ? Heatmap.DEFAULT_RANGE_COLOR_DARK\n            : Heatmap.DEFAULT_RANGE_COLOR_LIGHT);\n      }\n    );\n\n    width.value =\n      LEFT_SECTION_WIDTH +\n      SQUARE_SIZE * heatmap.value.weekCount +\n      SQUARE_BORDER_SIZE;\n    height.value = TOP_SECTION_HEIGHT + SQUARE_SIZE * Heatmap.DAYS_IN_WEEK;\n    daysLabelWrapperTransform.value = `translate(0, ${TOP_SECTION_HEIGHT})`;\n    monthsLabelWrapperTransform.value = `translate(${LEFT_SECTION_WIDTH}, 0)`;\n\n    watch([width, height], ([w, h]) => (viewbox.value = ` 0 0 ${w} ${h}`), {\n      immediate: true,\n    });\n    watch(\n      [width, height, rangeColor],\n      ([w, h, rc]) => {\n        legendWrapperTransform.value = `translate(${\n          w - SQUARE_SIZE * rc.length - 30\n        }, ${h - BOTTOM_SECTION_HEIGHT})`;\n      },\n      { immediate: true }\n    );\n\n    watch(\n      locale,\n      (l) =>\n        (lo.value = l\n          ? { ...Heatmap.DEFAULT_LOCALE, ...l }\n          : Heatmap.DEFAULT_LOCALE),\n      { immediate: true }\n    );\n    watch(\n      rangeColor,\n      (rc) =>\n        (legendViewbox.value = `0 0 ${Heatmap.SQUARE_SIZE * (rc.length + 1)} ${\n          Heatmap.SQUARE_SIZE\n        }`),\n      { immediate: true }\n    );\n\n    watch(\n      [values, tooltipUnit, tooltipFormatter, noDataText, max, rangeColor],\n      () => {\n        heatmap.value = new Heatmap(\n          props.endDate as Date,\n          props.values,\n          props.max\n        );\n        tippyInstances.forEach((item) => item.destroy());\n        nextTick(initTippy);\n      }\n    );\n\n    onMounted(initTippy);\n    onBeforeUnmount(() => {\n      tippySingleton?.destroy();\n      tippyInstances.forEach((item) => item.destroy());\n    });\n\n    function initTippyLazy(e: MouseEvent) {\n      if (\n        tippySingleton &&\n        e.target &&\n        (e.target as HTMLElement).classList.contains(\"vch__day__square\") &&\n        (e.target as HTMLElement).dataset.weekIndex !== undefined &&\n        (e.target as HTMLElement).dataset.dayIndex !== undefined\n      ) {\n        const weekIndex = Number((e.target as HTMLElement).dataset.weekIndex),\n          dayIndex = Number((e.target as HTMLElement).dataset.dayIndex);\n\n        if (!isNaN(weekIndex) && !isNaN(dayIndex)) {\n          const tooltip = tooltipOptions(\n            heatmap.value.calendar[weekIndex][dayIndex]\n          );\n          if (tooltip && heatmap.value.calendar[weekIndex][dayIndex].count) {\n            const instance = tippyInstances.get(e.target as HTMLElement);\n\n            if (instance) {\n              instance.setContent(tooltip);\n            } else if (!instance) {\n              tippyInstances.set(\n                e.target as HTMLElement,\n                tippy(e.target as HTMLElement, { content: tooltip } as any)\n              );\n              tippySingleton.setInstances(Array.from(tippyInstances.values()));\n            }\n          }\n        }\n      }\n    }\n\n    return {\n      SQUARE_BORDER_SIZE,\n      SQUARE_SIZE,\n      DAYS_IN_WEEK,\n      LEFT_SECTION_WIDTH,\n      RIGHT_SECTION_WIDTH,\n      TOP_SECTION_HEIGHT,\n      BOTTOM_SECTION_HEIGHT,\n      svg,\n      heatmap,\n      now,\n      width,\n      height,\n      viewbox,\n      daysLabelWrapperTransform,\n      monthsLabelWrapperTransform,\n      yearWrapperTransform,\n      legendWrapperTransform,\n      lo,\n      legendViewbox,\n      curRangeColor: rangeColor,\n      getWeekPosition,\n      getDayPosition,\n      getMonthLabelPosition,\n      initTippyLazy,\n      rounding,\n      asDots: props.asDots,\n    };\n  },\n});\n</script>\n\n<template>\n  <div :class=\"{ vch__container: true, 'dark-mode': darkMode }\">\n    <svg class=\"vch__wrapper\" ref=\"svg\" :viewBox=\"viewbox\">\n      <g\n        class=\"vch__months__labels__wrapper\"\n        :transform=\"monthsLabelWrapperTransform\"\n      >\n        <text\n          class=\"vch__month__label\"\n          v-for=\"(month, index) in heatmap.firstFullWeekOfMonths\"\n          :key=\"index\"\n          :x=\"getMonthLabelPosition(month).x\"\n          :y=\"getMonthLabelPosition(month).y\"\n        >\n          {{ lo.months[month.value] }}\n        </text>\n      </g>\n\n      <g\n        class=\"vch__days__labels__wrapper\"\n        :transform=\"daysLabelWrapperTransform\"\n        v-if=\"showWeekdays\"\n      >\n        <template v-for=\"i in [0, 1, 2, 3, 4, 5, 6]\">\n\t\t\t\t  <text\n            class=\"vch__day__label\"\n            :key=\"i\"\n            v-if=\"(i + startWeekday) % 2 == 1\"\n\t\t\t\t\t  :x=\"0\"\n\t\t\t\t\t  :y=\"((SQUARE_SIZE - SQUARE_BORDER_SIZE) + SQUARE_SIZE * i)\"\n\t\t\t\t  >\n\t\t\t\t\t{{ lo.days[ (i + startWeekday) % DAYS_IN_WEEK ] }}\n\t\t\t\t  </text>\n        </template>\n      </g>\n\n      <g\n        class=\"vch__year__wrapper\"\n        :transform=\"yearWrapperTransform\"\n        @mouseover=\"initTippyLazy\"\n      >\n        <g\n          class=\"vch__month__wrapper\"\n          v-for=\"(week, weekIndex) in heatmap.calendar\"\n          :key=\"weekIndex\"\n          :transform=\"getWeekPosition(weekIndex)\"\n        >\n          <template v-for=\"(day, dayIndex) in week\" :key=\"dayIndex\">\n            <rect\n              class=\"vch__day__square\"\n              :class=\"dayClasses\"\n              v-if=\"day.date < now\"\n              :rx=\"rounding\"\n              :ry=\"rounding\"\n              :transform=\"getDayPosition(dayIndex)\"\n              :width=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n              :height=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n              :style=\"{ fill: curRangeColor[day.colorIndex] }\"\n              :data-week-index=\"weekIndex\"\n              :data-day-index=\"dayIndex\"\n              @click=\"$emit('dayClick', day)\"\n            />\n          </template>\n        </g>\n      </g>\n    </svg>\n    <div class=\"vch__legend\" v-if=\"showLegend\">\n      <slot name=\"legend\">\n        <div class=\"vch__legend-left\">\n          <slot name=\"vch__legend-left\"></slot>\n        </div>\n        <div class=\"vch__legend-right\">\n          <slot name=\"legend-right\">\n            <div class=\"vch__legend\">\n              <div>{{ lo.less }}</div>\n              <svg\n                class=\"vch__external-legend-wrapper\"\n                :viewBox=\"legendViewbox\"\n                :height=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n              >\n                <g class=\"vch__legend__wrapper\">\n                  <rect\n                    v-for=\"(color, index) in curRangeColor\"\n                    :key=\"index\"\n                    :rx=\"rounding\"\n                    :ry=\"rounding\"\n                    :style=\"{ fill: color }\"\n                    :width=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n                    :height=\"SQUARE_SIZE - SQUARE_BORDER_SIZE\"\n                    :x=\"SQUARE_SIZE * index\"\n                  />\n                </g>\n              </svg>\n              <div>{{ lo.more }}</div>\n            </div>\n          </slot>\n        </div>\n      </slot>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.vch__container {\n  .vch__legend {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n  }\n\n  .vch__external-legend-wrapper {\n    margin: 0 8px;\n  }\n}\n\nsvg.vch__wrapper {\n  font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen,\n    Ubuntu, Cantarell, \"Open Sans\", \"Helvetica Neue\", sans-serif;\n  line-height: 10px;\n  width: 100%;\n\n  .vch__months__labels__wrapper text.vch__month__label {\n    font-size: 10px;\n  }\n\n  .vch__days__labels__wrapper text.vch__day__label,\n  .vch__legend__wrapper text {\n    font-size: 9px;\n  }\n\n  text.vch__month__label,\n  text.vch__day__label,\n  .vch__legend__wrapper text {\n    fill: #767676;\n  }\n\n  rect.vch__day__square:focus {\n    outline: none;\n  }\n\n  &.dark-mode {\n    text.vch__month__label,\n    text.vch__day__label,\n    .vch__legend__wrapper text {\n      fill: #fff;\n    }\n  }\n}\n</style>\n","import { App } from \"vue\";\nimport CalendarHeatmap from \"@/components/CalendarHeatmap.vue\";\n\nfunction install(Vue: App) {\n  Vue.component(CalendarHeatmap.name!, CalendarHeatmap);\n}\n\nexport default { install };\nexport * from \"@/components/Heatmap\";\nexport { default as CalendarHeatmap } from \"@/components/CalendarHeatmap.vue\";\n"],"names":["_Heatmap","endDate","values","max","colorRange","startWeekday","colorScale","__publicField","day","v","i","len","date","j","dayValues","cal","index","lastWeek","currentWeek","numDays","newDate","entry","counts","c","a","b","numBuckets","percentile","count","percentage","thresholds","logCount","logMax","Heatmap","_sfc_main","defineComponent","props","SQUARE_BORDER_SIZE","SQUARE_SIZE","LEFT_SECTION_WIDTH","RIGHT_SECTION_WIDTH","TOP_SECTION_HEIGHT","BOTTOM_SECTION_HEIGHT","yearWrapperTransform","svg","ref","now","heatmap","width","height","viewbox","legendViewbox","daysLabelWrapperTransform","monthsLabelWrapperTransform","legendWrapperTransform","lo","rangeColor","DAYS_IN_WEEK","rounding","tooltipUnit","tooltipFormatter","noDataText","locale","toRefs","tippyInstances","tippySingleton","initTippy","createSingleton","tooltipOptions","getWeekPosition","getDayPosition","getMonthLabelPosition","month","watch","toRef","rc","dm","w","h","l","item","nextTick","onMounted","onBeforeUnmount","initTippyLazy","e","weekIndex","dayIndex","tooltip","instance","tippy","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_14","_createElementBlock","_normalizeClass","_ctx","_createElementVNode","_openBlock","_Fragment","_renderList","_toDisplayString","_hoisted_3","_hoisted_5","_createCommentVNode","_cache","args","week","_normalizeStyle","$event","_hoisted_8","_hoisted_9","_renderSlot","color","_hoisted_15","install","Vue","CalendarHeatmap"],"mappings":"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"}